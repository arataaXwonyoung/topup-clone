<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Elements Test</title>
    <style>
        body { background: #0E0E0F; color: white; padding: 20px; }
        .test-section { 
            background: rgba(30, 30, 40, 0.9); 
            padding: 20px; 
            margin: 20px 0; 
            border-radius: 8px; 
        }
        .success { color: #10b981; }
        .error { color: #ef4444; }
        .warning { color: #f59e0b; }
    </style>
</head>
<body>
    <h1>Interactive Elements Fix Test</h1>
    
    <div class="test-section">
        <h2>Z-Index Hierarchy Test</h2>
        <div id="z-index-test"></div>
    </div>
    
    <div class="test-section">
        <h2>Form Interaction Test</h2>
        <form id="test-form">
            <input type="text" placeholder="Test input" id="test-input">
            <button type="button" id="test-button">Test Button</button>
        </form>
        <div id="form-test-results"></div>
    </div>
    
    <div class="test-section">
        <h2>User Menu Test (Logged In)</h2>
        <div class="relative">
            <button id="user-menu-toggle">User Menu</button>
            <div id="user-menu" style="display: none; position: absolute; top: 100%; background: #1f2937; padding: 10px;">
                <a href="#">Dashboard</a><br>
                <a href="#">Profile</a><br>
                <a href="#">Logout</a>
            </div>
        </div>
        <div id="menu-test-results"></div>
    </div>
    
    <script>
        // Test z-index values
        function testZIndexHierarchy() {
            const results = [];
            
            // Test CSS custom properties
            const root = document.documentElement;
            const computed = getComputedStyle(root);
            
            const expectedZIndexes = {
                '--z-background': '-1',
                '--z-content': '10',
                '--z-elevated': '100',
                '--z-dropdown': '9000',
                '--z-form-elements': '9999',
                '--z-critical': '10000'
            };
            
            Object.entries(expectedZIndexes).forEach(([property, expectedValue]) => {
                const actualValue = computed.getPropertyValue(property).trim();
                if (actualValue === expectedValue) {
                    results.push(`✓ ${property}: ${actualValue}`);
                } else {
                    results.push(`✗ ${property}: expected ${expectedValue}, got ${actualValue}`);
                }
            });
            
            document.getElementById('z-index-test').innerHTML = results.join('<br>');
        }
        
        // Test form interactions
        function testFormInteractions() {
            const input = document.getElementById('test-input');
            const button = document.getElementById('test-button');
            const results = [];
            
            // Test input interaction
            try {
                input.focus();
                input.value = 'Test successful';
                results.push('<span class="success">✓ Input is focusable and typeable</span>');
            } catch (e) {
                results.push('<span class="error">✗ Input focus/type failed: ' + e.message + '</span>');
            }
            
            // Test button click
            let buttonClicked = false;
            button.addEventListener('click', () => {
                buttonClicked = true;
                results.push('<span class="success">✓ Button click event fired</span>');
                document.getElementById('form-test-results').innerHTML = results.join('<br>');
            });
            
            button.click();
            
            if (!buttonClicked) {
                results.push('<span class="error">✗ Button click failed</span>');
            }
            
            // Test computed styles
            const inputStyle = getComputedStyle(input);
            const buttonStyle = getComputedStyle(button);
            
            results.push(
                `<span class="warning">Input z-index: ${inputStyle.zIndex}</span>`,
                `<span class="warning">Button z-index: ${buttonStyle.zIndex}</span>`,
                `<span class="warning">Input pointer-events: ${inputStyle.pointerEvents}</span>`,
                `<span class="warning">Button pointer-events: ${buttonStyle.pointerEvents}</span>`
            );
            
            document.getElementById('form-test-results').innerHTML = results.join('<br>');
        }
        
        // Test user menu
        function testUserMenu() {
            const toggle = document.getElementById('user-menu-toggle');
            const menu = document.getElementById('user-menu');
            const results = [];
            
            toggle.addEventListener('click', () => {
                const isVisible = menu.style.display !== 'none';
                menu.style.display = isVisible ? 'none' : 'block';
                results.push('<span class="success">✓ Menu toggle works</span>');
                
                if (!isVisible) {
                    const menuStyle = getComputedStyle(menu);
                    results.push(`<span class="warning">Menu z-index: ${menuStyle.zIndex}</span>`);
                }
                
                document.getElementById('menu-test-results').innerHTML = results.join('<br>');
            });
            
            results.push('<span class="warning">Click the User Menu button to test</span>');
            document.getElementById('menu-test-results').innerHTML = results.join('<br>');
        }
        
        // Run tests
        document.addEventListener('DOMContentLoaded', () => {
            testZIndexHierarchy();
            testFormInteractions();
            testUserMenu();
        });
    </script>
</body>
</html>
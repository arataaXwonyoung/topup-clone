<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visibility Test - Takapedia</title>
    <style>
        body {
            background: #0E0E0F;
            color: white;
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        .test-result {
            background: rgba(30, 30, 40, 0.9);
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
        }
        .success { color: #10b981; }
        .error { color: #ef4444; }
        .warning { color: #f59e0b; }
        .info { color: #3b82f6; }
        button {
            background: #FFEA00;
            color: #000;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
    </style>
</head>
<body>
    <h1>üîç Takapedia Visibility Test</h1>
    
    <div class="test-result">
        <h2>Test Controls</h2>
        <button onclick="testAllElements()">üß™ Test All Elements</button>
        <button onclick="forceShowAll()">üëÅÔ∏è Force Show All</button>
        <button onclick="checkCSS()">üé® Check CSS Variables</button>
        <button onclick="testInteractions()">üñ±Ô∏è Test Interactions</button>
    </div>

    <div id="test-results"></div>

    <script>
        function testAllElements() {
            const results = [];
            const testSelectors = [
                'nav', '#main-navbar',
                '.hero-section',
                '.game-card',
                '.denomination-card', 
                '.glass',
                'button',
                'input',
                'form',
                '.container',
                '.max-w-7xl',
                'main'
            ];

            results.push('<h3>üîç Element Visibility Test</h3>');
            
            testSelectors.forEach(selector => {
                const elements = document.querySelectorAll(selector);
                const hiddenElements = [];
                
                elements.forEach((el, index) => {
                    const computed = getComputedStyle(el);
                    const isHidden = (
                        computed.display === 'none' ||
                        computed.visibility === 'hidden' ||
                        computed.opacity === '0'
                    );
                    
                    if (isHidden) {
                        hiddenElements.push(index);
                    }
                });

                if (elements.length === 0) {
                    results.push(`<span class="warning">‚ö†Ô∏è ${selector}: No elements found</span>`);
                } else if (hiddenElements.length === 0) {
                    results.push(`<span class="success">‚úÖ ${selector}: All ${elements.length} elements visible</span>`);
                } else {
                    results.push(`<span class="error">‚ùå ${selector}: ${hiddenElements.length}/${elements.length} elements hidden</span>`);
                }
            });

            document.getElementById('test-results').innerHTML = results.join('<br>');
        }

        function forceShowAll() {
            const results = [];
            let fixedCount = 0;

            results.push('<h3>üõ†Ô∏è Force Show All Elements</h3>');

            document.querySelectorAll('*').forEach(element => {
                if (['SCRIPT', 'STYLE', 'META', 'TITLE', 'HEAD'].includes(element.tagName)) {
                    return;
                }

                const computed = getComputedStyle(element);
                const wasHidden = (
                    computed.display === 'none' ||
                    computed.visibility === 'hidden' ||
                    computed.opacity === '0'
                );

                if (wasHidden && !element.hasAttribute('x-show') && !element.classList.contains('x-cloak')) {
                    // Force show
                    element.style.display = 'block';
                    element.style.visibility = 'visible';
                    element.style.opacity = '1';
                    element.style.pointerEvents = 'auto';
                    
                    // Fix specific display types
                    if (['BUTTON', 'A', 'SPAN', 'STRONG', 'EM'].includes(element.tagName)) {
                        element.style.display = 'inline-block';
                    }
                    if (element.className && element.className.includes('flex')) {
                        element.style.display = 'flex';
                    }
                    if (element.className && element.className.includes('grid')) {
                        element.style.display = 'grid';
                    }

                    fixedCount++;
                }
            });

            results.push(`<span class="success">‚úÖ Fixed ${fixedCount} hidden elements</span>`);
            document.getElementById('test-results').innerHTML = results.join('<br>');
        }

        function checkCSS() {
            const results = [];
            results.push('<h3>üé® CSS Variables Test</h3>');

            const root = document.documentElement;
            const computed = getComputedStyle(root);

            const expectedVars = {
                '--z-background': '-1',
                '--z-content': '10',
                '--z-elevated': '100',
                '--z-dropdown': '9000',
                '--z-form-elements': '9999',
                '--z-critical': '10000'
            };

            Object.entries(expectedVars).forEach(([varName, expectedValue]) => {
                const actualValue = computed.getPropertyValue(varName).trim();
                if (actualValue === expectedValue) {
                    results.push(`<span class="success">‚úÖ ${varName}: ${actualValue}</span>`);
                } else {
                    results.push(`<span class="error">‚ùå ${varName}: expected ${expectedValue}, got "${actualValue}"</span>`);
                }
            });

            document.getElementById('test-results').innerHTML = results.join('<br>');
        }

        function testInteractions() {
            const results = [];
            results.push('<h3>üñ±Ô∏è Interaction Test</h3>');

            // Test buttons
            const buttons = document.querySelectorAll('button');
            results.push(`<span class="info">‚ÑπÔ∏è Found ${buttons.length} buttons</span>`);

            let clickableButtons = 0;
            buttons.forEach(button => {
                const computed = getComputedStyle(button);
                if (computed.pointerEvents !== 'none' && computed.cursor === 'pointer') {
                    clickableButtons++;
                }
            });

            if (clickableButtons === buttons.length) {
                results.push(`<span class="success">‚úÖ All buttons are clickable</span>`);
            } else {
                results.push(`<span class="error">‚ùå Only ${clickableButtons}/${buttons.length} buttons are clickable</span>`);
            }

            // Test inputs
            const inputs = document.querySelectorAll('input');
            results.push(`<span class="info">‚ÑπÔ∏è Found ${inputs.length} inputs</span>`);

            let focusableInputs = 0;
            inputs.forEach(input => {
                try {
                    const computed = getComputedStyle(input);
                    if (computed.pointerEvents !== 'none' && computed.display !== 'none') {
                        focusableInputs++;
                    }
                } catch (e) {
                    // Skip
                }
            });

            if (focusableInputs === inputs.length) {
                results.push(`<span class="success">‚úÖ All inputs are focusable</span>`);
            } else {
                results.push(`<span class="error">‚ùå Only ${focusableInputs}/${inputs.length} inputs are focusable</span>`);
            }

            document.getElementById('test-results').innerHTML = results.join('<br>');
        }

        // Auto-run tests on load
        window.addEventListener('load', () => {
            setTimeout(() => {
                testAllElements();
            }, 2000);
        });
    </script>
</body>
</html>